/**
 * UserResonance.css
 * Ghost Protocol - Visual Identity System
 * Trust-based avatar styling with halo, glow, and glitch effects
 */

/* Size Variables */
.resonance-xs { --resonance-size: 24px; --halo-width: 1px; --label-size: 8px; }
.resonance-sm { --resonance-size: 32px; --halo-width: 1px; --label-size: 9px; }
.resonance-md { --resonance-size: 48px; --halo-width: 2px; --label-size: 10px; }
.resonance-lg { --resonance-size: 64px; --halo-width: 2px; --label-size: 11px; }
.resonance-xl { --resonance-size: 96px; --halo-width: 3px; --label-size: 12px; }

/* Base Container */
.user-resonance {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--resonance-size);
  height: var(--resonance-size);
  cursor: pointer;
  transition: transform 0.2s ease;
}

.user-resonance:hover {
  transform: scale(1.05);
}

/* Halo Ring */
.resonance-halo {
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  border: var(--halo-width) solid var(--halo-color);
  opacity: var(--glow-intensity);
  box-shadow: 
    0 0 calc(var(--resonance-size) * 0.15) var(--halo-color),
    inset 0 0 calc(var(--resonance-size) * 0.1) var(--halo-color);
  pointer-events: none;
  transition: all 0.3s ease;
}

/* Avatar Container */
.resonance-avatar {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  overflow: hidden;
  position: relative;
  z-index: 1;
  background: var(--ghost-surface, #141416);
}

.resonance-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.resonance-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--ghost-surface, #141416), var(--ghost-elevated, #1c1c1f));
  color: var(--ghost-text-soft, rgba(255, 255, 255, 0.7));
  font-family: 'JetBrains Mono', monospace;
  font-size: calc(var(--resonance-size) * 0.4);
  font-weight: 500;
  text-transform: uppercase;
}

/* Trust Label */
.resonance-label {
  position: absolute;
  bottom: calc(var(--resonance-size) * -0.35);
  left: 50%;
  transform: translateX(-50%);
  font-family: 'JetBrains Mono', monospace;
  font-size: var(--label-size);
  letter-spacing: 0.1em;
  color: var(--halo-color);
  white-space: nowrap;
  opacity: 0.8;
}

/* ===== TIER SPECIFIC STYLES ===== */

/* Photon Echo (Trust > 800) */
.resonance-photon .resonance-halo {
  background: radial-gradient(
    circle at center,
    transparent 60%,
    rgba(0, 255, 212, 0.1) 100%
  );
}

.resonance-photon:hover .resonance-halo {
  box-shadow: 
    0 0 calc(var(--resonance-size) * 0.3) var(--halo-color),
    inset 0 0 calc(var(--resonance-size) * 0.15) var(--halo-color);
}

/* Ghost State (Trust 500-800) */
.resonance-ghost .resonance-halo {
  opacity: 0.4;
}

/* Warning Signal (Trust 400-500) */
.resonance-warning .resonance-halo {
  border-style: dashed;
}

/* Glitch Anomaly (Trust 200-400) */
.resonance-glitch .resonance-avatar {
  animation: avatar-shake 0.5s ease-in-out infinite;
}

/* Corrupted (Trust < 200) */
.resonance-corrupted .resonance-avatar {
  opacity: 0.6;
}

.resonance-corrupted .resonance-halo {
  border-style: dotted;
  animation: halo-flicker 0.3s ease-in-out infinite;
}

/* ===== GLITCH OVERLAY ===== */

.resonance-glitch-overlay {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  pointer-events: none;
  z-index: 2;
  mix-blend-mode: screen;
}

.glitch-level-1 {
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 159, 67, 0.03) 2px,
    rgba(255, 159, 67, 0.03) 4px
  );
}

.glitch-level-2 {
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    rgba(255, 68, 68, 0.05) 1px,
    rgba(255, 68, 68, 0.05) 2px
  );
  animation: scanlines 0.1s linear infinite;
}

.glitch-level-3 {
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    rgba(255, 68, 68, 0.1) 1px,
    rgba(255, 68, 68, 0.1) 2px
  );
  animation: heavy-scanlines 0.05s linear infinite;
}

/* ===== ANIMATIONS ===== */

/* Breathing Animation (Photon tier) */
.animate-breathing .resonance-halo {
  animation: breathing 3s ease-in-out infinite;
}

@keyframes breathing {
  0%, 100% {
    opacity: var(--glow-intensity);
    transform: scale(1);
  }
  50% {
    opacity: calc(var(--glow-intensity) * 1.3);
    transform: scale(1.02);
  }
}

/* Warning Pulse */
.animate-pulse-warning .resonance-halo {
  animation: pulse-warning 2s ease-in-out infinite;
}

@keyframes pulse-warning {
  0%, 100% {
    opacity: var(--glow-intensity);
  }
  50% {
    opacity: calc(var(--glow-intensity) * 0.5);
  }
}

/* Glitch Animation */
.animate-glitch .resonance-avatar {
  animation: glitch-jitter 0.3s ease-in-out infinite;
}

@keyframes glitch-jitter {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-1px, 1px); }
  40% { transform: translate(1px, -1px); }
  60% { transform: translate(-1px, 0); }
  80% { transform: translate(1px, 1px); }
}

/* Heavy Glitch Animation */
.animate-heavy-glitch .resonance-avatar {
  animation: heavy-glitch 0.2s ease-in-out infinite;
}

@keyframes heavy-glitch {
  0%, 100% { 
    transform: translate(0); 
    filter: hue-rotate(0deg);
  }
  25% { 
    transform: translate(-2px, 1px); 
    filter: hue-rotate(90deg);
  }
  50% { 
    transform: translate(2px, -2px); 
    filter: hue-rotate(180deg);
  }
  75% { 
    transform: translate(-1px, 2px); 
    filter: hue-rotate(270deg);
  }
}

/* Avatar Shake */
@keyframes avatar-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-1px); }
  75% { transform: translateX(1px); }
}

/* Halo Flicker */
@keyframes halo-flicker {
  0%, 100% { opacity: var(--glow-intensity); }
  50% { opacity: calc(var(--glow-intensity) * 0.3); }
}

/* Scanlines */
@keyframes scanlines {
  0% { background-position: 0 0; }
  100% { background-position: 0 4px; }
}

@keyframes heavy-scanlines {
  0% { background-position: 0 0; }
  100% { background-position: 0 2px; }
}

/* ===== HOVER EFFECTS ===== */

.user-resonance:hover .resonance-label {
  opacity: 1;
}

.resonance-photon:hover .resonance-avatar {
  filter: brightness(1.1) saturate(1.2);
}

.resonance-glitch:hover .resonance-glitch-overlay,
.resonance-corrupted:hover .resonance-glitch-overlay {
  opacity: 0.5;
}
